webpackJsonp([10],{Luci:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),r=a.n(o),s=a("Nv7v"),n={getUserInfo:{url:"/app/client/getMyself",method:"post"},getStoreBy:{url:"/app/storer/getStoreByCode",method:"post"},getMySelfs:{url:"/app/supplier/getMySelf",method:"post"},authForm:{url:"uaa/auth/form",method:"post"}},i=function(t,e){return Object(s.a)(n[t].url,n[t].method,e,{},n[t].fileConfig)},l=a("mtWM"),u=a.n(l),f=a("mw3O"),d=a.n(f),c={name:"login",data:function(){return{formData:{username:"",password:""},formRules:{username:[{required:!0,message:"请输入账号",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]}}},methods:{login:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;u()({method:"post",url:"http://29ng920368.wicp.vip/uaa/auth/form",data:d.a.stringify(t.formData),headers:{"Content-Type":"application/x-www-form-urlencoded;"}}).then(function(e){0===e.data.code?(t.$message({type:"success",message:e.data.msg}),console.log("login_data: ",e),sessionStorage.setItem("userInfo",r()(e.data.data)),t.getUserInfo(e.data.data.access_token)):t.$message({type:"error",message:e.data.msg})})})},getUserInfo:function(t){var e=this;u()({method:"post",url:"http://29ng920368.wicp.vip/pc/user/getUserUrl",data:d.a.stringify({access_token:t}),headers:{"Content-Type":"application/x-www-form-urlencoded;"}}).then(function(t){0===t.data.code?(sessionStorage.setItem("roleInfo",r()(t.data.data)),console.log("data.data.data.role: ",t.data.data.role),"2"===t.data.data.role?i("getUserInfo",{}).then(function(t){console.log("data",t),sessionStorage.setItem("roleInfo",r()(t.data)),2===t.data.role?e.$router.push({path:"/home"},function(t){},function(t){}):4===t.data.role?e.$router.push({path:"/order-list"},function(t){},function(t){}):e.$router.push({path:"/driver-shop-info"},function(t){},function(t){})}):"3"===t.data.data.role?i("getStoreBy",{}).then(function(t){sessionStorage.setItem("roleInfo",r()(t.data)),e.$router.push({path:"/order-list"},function(t){},function(t){})}):"4"===t.data.data.role&&i("getMySelfs",{}).then(function(t){console.log("getMySelfs",t),sessionStorage.setItem("roleInfo",r()(t.data)),e.$router.push({path:"/driver-shop-info"},function(t){},function(t){})})):e.$message({type:"error",message:t.data.msg})})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.formRules,inline:"","label-width":"65px"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),t._v(" "),a("el-form-item")],1),t._v(" "),a("el-button",{staticClass:"login-btn",attrs:{type:"info"},on:{click:t.login}},[t._v("登     录")]),t._v(" "),a("div",{staticClass:"register-btn"},[a("el-button",{staticClass:"register-font",attrs:{type:"text"},on:{click:function(e){return t.$router.push({path:"/register"})}}},[t._v("新用户？点击这里登录")])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:a("gnqb"),alt:""}})])}]};var m=a("VU/8")(c,p,!1,function(t){a("XLxv")},"data-v-5136159d",null);e.default=m.exports},XLxv:function(t,e){},gnqb:function(t,e,a){t.exports=a.p+"static/img/loG.0701aff.png"}});
//# sourceMappingURL=10.6c537dcfd524f52960c8.js.map